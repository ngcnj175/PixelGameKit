<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#d4c4a8">
    <meta name="description" content="PixelGameKit - „Éî„ÇØ„Çª„É´„Ç¢„Éº„Éà„Å®„Ç≤„Éº„É†„Çí‰Ωú„Å£„Å¶ÈÅä„Åº„ÅÜÔºÅ">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/svg+xml" href="assets/icons/icon-192.svg">
    <link rel="apple-touch-icon" href="assets/icons/icon-192.svg">
    <title>PixelGameKit v1.56.0</title>
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <div id="app">
        <!-- Èö†„Åó„Éï„Ç°„Ç§„É´ÂÖ•Âäõ -->
        <input type="file" id="file-input" accept=".json,.pgk" style="display:none">

        <!-- „Éò„ÉÉ„ÉÄ„ÉºÔºà„Ç¢„Ç§„Ç≥„É≥„Éê„ÉºÔºâ -->
        <header id="header">
            <div id="toolbar-file">
                <button id="new-icon-btn" class="toolbar-icon" title="Êñ∞Ë¶è">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z" />
                    </svg>
                </button>
                <button id="load-icon-btn" class="toolbar-icon" title="Ë™≠„ÅøËæº„Åø">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M10 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z" />
                    </svg>
                </button>
                <button id="save-icon-btn" class="toolbar-icon" title="‰øùÂ≠ò">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z" />
                    </svg>
                </button>
                <button id="share-icon-btn" class="toolbar-icon" title="ÂÖ±Êúâ">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92z" />
                    </svg>
                </button>
            </div>
            <div id="toolbar-nav">
                <button id="nav-play-btn" class="toolbar-icon nav-icon active-nav" title="„Éó„É¨„Ç§">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M8 5v14l11-7z" />
                    </svg>
                </button>
                <button id="nav-paint-btn" class="toolbar-icon nav-icon" title="„Éî„ÇØ„Çª„É´">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M3 3h8v8H3zm10 0h8v8h-8zM3 13h8v8H3zm10 0h8v8h-8z" />
                    </svg>
                </button>
                <button id="nav-stage-btn" class="toolbar-icon nav-icon" title="„Çπ„ÉÜ„Éº„Ç∏">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M14 6l-3.75 5 2.85 3.8-1.6 1.2C9.81 13.75 7 10 7 10l-6 8h22L14 6z" />
                    </svg>
                </button>
                <button id="nav-sound-btn" class="toolbar-icon nav-icon" title="„Çµ„Ç¶„É≥„Éâ">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z" />
                    </svg>
                </button>
            </div>
        </header>

        <!-- ========== „Ç≤„Éº„É†ÁîªÈù¢ ========== -->
        <div id="play-screen" class="screen active">
            <div class="screen-title">GAME</div>
            <!-- „Ç≤„Éº„É†ÊÉÖÂ†±ÔºàÁ∑®ÈõÜÂèØËÉΩÔºâ -->
            <div id="game-info">
                <input type="text" id="game-title" value="My Game" placeholder="„Ç≤„Éº„É†„Çø„Ç§„Éà„É´">
                <input type="text" id="game-subtitle" value="Stage 1" placeholder="„Çπ„ÉÜ„Éº„Ç∏Âêç/‰ΩúËÄÖ">
            </div>

            <!-- „Ç≤„Éº„É†„Éì„É•„Éº„Éù„Éº„Éà -->
            <div id="game-viewport">
                <canvas id="game-canvas"></canvas>
            </div>

            <!-- „Ç≥„É≥„Éà„É≠„Éº„É©„Éº -->
            <div id="controller-area">
                <div id="controls-row">
                    <!-- ÂçÅÂ≠ó„Ç≠„Éº -->
                    <div id="dpad-container">
                        <div id="dpad">
                            <button id="btn-up" class="dpad-btn" data-dir="up"></button>
                            <button id="btn-down" class="dpad-btn" data-dir="down"></button>
                            <button id="btn-left" class="dpad-btn" data-dir="left"></button>
                            <button id="btn-right" class="dpad-btn" data-dir="right"></button>
                        </div>
                    </div>

                    <!-- „Ç¢„ÇØ„Ç∑„Éß„É≥„Éú„Çø„É≥ -->
                    <div id="action-btns-container">
                        <button id="btn-b" class="action-btn">B</button>
                        <button id="btn-a" class="action-btn">A</button>
                    </div>
                </div>

                <!-- „Çπ„Çø„Éº„Éà„Éú„Çø„É≥Ôºà‰∏≠Â§Æ‰∏ãÔºâ -->
                <div id="start-btn-container">
                    <button id="btn-start" class="system-btn">START</button>
                </div>
            </div>
        </div>

        <!-- ========== „Éî„ÇØ„Çª„É´ÁîªÈù¢ ========== -->
        <div id="paint-screen" class="screen">
            <div class="screen-title">PIXEL</div>
            <div id="paint-content-wrapper">
                <!-- „Çπ„Éó„É©„Ç§„Éà„Ç®„É™„Ç¢ÔºàËøΩÂä†„Éú„Çø„É≥Â∑¶Âõ∫ÂÆö + „Çπ„ÇØ„É≠„Éº„É´ÂèØËÉΩ„É™„Çπ„ÉàÔºâ -->
                <div id="sprite-area" class="gallery-row">
                    <button id="add-sprite-btn" class="gallery-add-btn">+</button>
                    <div id="sprite-scroll-container" class="gallery-scroll">
                        <div id="sprite-list">
                            <!-- JS„ÅßÁîüÊàê -->
                        </div>
                    </div>
                </div>

                <!-- „É°„Ç§„É≥„Ç®„É™„Ç¢Ôºà„ÉÑ„Éº„É´Â∑¶ + „Ç≠„É£„É≥„Éê„Çπ‰∏≠Â§ÆÔºâ -->
                <div id="paint-main-area">
                    <!-- Á∑®ÈõÜ„ÉÑ„Éº„É´ÔºàÂ∑¶ÂÅ¥Á∏¶1ÂàóÔºâ -->
                    <div id="paint-tools">
                        <button class="paint-tool-btn active" data-tool="pen" title="„Éö„É≥">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path
                                    d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z" />
                            </svg>
                        </button>
                        <button class="paint-tool-btn" data-tool="eraser" title="Ê∂à„Åó„Ç¥„É†">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path
                                    d="M16.24 3.56l4.95 4.94c.78.79.78 2.05 0 2.84L12 20.53a4.008 4.008 0 01-5.66 0L2.81 17c-.78-.79-.78-2.05 0-2.84l10.6-10.6c.79-.78 2.05-.78 2.83 0zM4.22 15.58l3.54 3.53c.78.79 2.04.79 2.83 0l3.53-3.53-4.95-4.95-4.95 4.95z" />
                            </svg>
                        </button>
                        <button class="paint-tool-btn" data-tool="fill" title="Â°ó„Çä„Å§„Å∂„Åó">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path
                                    d="M16.56 8.94L7.62 0 6.21 1.41l2.38 2.38-5.15 5.15c-.59.59-.59 1.54 0 2.12l5.5 5.5c.29.29.68.44 1.06.44s.77-.15 1.06-.44l5.5-5.5c.59-.58.59-1.53 0-2.12zM5.21 10L10 5.21 14.79 10H5.21zM19 11.5s-2 2.17-2 3.5c0 1.1.9 2 2 2s2-.9 2-2c0-1.33-2-3.5-2-3.5z" />
                            </svg>
                        </button>
                        <button class="paint-tool-btn" data-tool="eyedropper" title="„Çπ„Éù„Ç§„Éà">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path
                                    d="M20.71 5.63l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-3.12 3.12-1.93-1.91-1.41 1.41 1.42 1.42L3 16.25V21h4.75l8.92-8.92 1.42 1.42 1.41-1.41-1.92-1.92 3.12-3.12c.4-.4.4-1.03.01-1.42zM6.92 19L5 17.08l8.06-8.06 1.92 1.92L6.92 19z" />
                            </svg>
                        </button>
                        <button class="paint-tool-btn" data-tool="undo" title="Âèñ„ÇäÊ∂à„Åó">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path
                                    d="M12.5 8c-2.65 0-5.05 1.04-6.82 2.75L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z" />
                            </svg>
                        </button>
                        <hr class="tool-divider">
                        <button class="paint-tool-btn" data-tool="copy" title="„Ç≥„Éî„Éº">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path
                                    d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z" />
                            </svg>
                        </button>
                        <button class="paint-tool-btn" data-tool="paste" title="„Éö„Éº„Çπ„Éà">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path
                                    d="M19 2h-4.18C14.4.84 13.3 0 12 0c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm7 18H5V4h2v3h10V4h2v16z" />
                            </svg>
                        </button>
                        <button class="paint-tool-btn flip-v-btn" data-tool="flip-v" title="‰∏ä‰∏ãÂèçËª¢">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path
                                    d="M15 21h2v-2h-2v2zm4-12h2V7h-2v2zM3 5v14c0 1.1.9 2 2 2h4v-2H5V5h4V3H5c-1.1 0-2 .9-2 2zm16-2v2h2c0-1.1-.9-2-2-2zm-8 20h2V1h-2v22zm8-6h2v-2h-2v2zM15 5h2V3h-2v2zm4 8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2z" />
                            </svg>
                        </button>
                        <button class="paint-tool-btn" data-tool="flip-h" title="Â∑¶Âè≥ÂèçËª¢">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path
                                    d="M15 21h2v-2h-2v2zm4-12h2V7h-2v2zM3 5v14c0 1.1.9 2 2 2h4v-2H5V5h4V3H5c-1.1 0-2 .9-2 2zm16-2v2h2c0-1.1-.9-2-2-2zm-8 20h2V1h-2v22zm8-6h2v-2h-2v2zM15 5h2V3h-2v2zm4 8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2z" />
                            </svg>
                        </button>
                    </div>

                    <!-- „Ç≠„É£„É≥„Éê„Çπ -->
                    <canvas id="paint-canvas"></canvas>
                </div>

                <!-- „Ç´„É©„Éº„Éë„É¨„ÉÉ„Éà„Ç®„É™„Ç¢ÔºàËøΩÂä†„Éú„Çø„É≥Â∑¶Âõ∫ÂÆö + „Çπ„ÇØ„É≠„Éº„É´ÂèØËÉΩ„É™„Çπ„ÉàÔºâ -->
                <div id="color-area" class="gallery-row">
                    <button id="add-color-btn" class="gallery-add-btn">+</button>
                    <div id="color-scroll-container" class="gallery-scroll">
                        <div id="color-list">
                            <!-- JS„ÅßÁîüÊàê -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ========== „Çπ„ÉÜ„Éº„Ç∏ÁîªÈù¢ ========== -->
        <div id="stage-screen" class="screen">
            <div class="screen-title">STAGE</div>

            <!-- „Çπ„ÉÜ„Éº„Ç∏Ë®≠ÂÆö„Éë„Éç„É´ÔºàÊäò„Çä„Åü„Åü„ÅøÂèØËÉΩ„ÄÅ„Éá„Éï„Ç©„É´„ÉàÈùûË°®Á§∫Ôºâ -->
            <div id="stage-settings-panel" class="collapsed">
                <div id="stage-settings-header">
                    <span id="stage-settings-toggle">‚ñº</span>
                    <span>„Çπ„ÉÜ„Éº„Ç∏Ë®≠ÂÆö</span>
                </div>
                <div id="stage-settings-content">
                    <!-- „Çπ„ÉÜ„Éº„Ç∏„Çø„Ç§„Éà„É´ -->
                    <div class="setting-row">
                        <label>„Çπ„ÉÜ„Éº„Ç∏„Çø„Ç§„Éà„É´</label>
                        <input type="text" id="stage-name-input" placeholder="Êñ∞Ë¶è„Éó„É≠„Ç∏„Çß„ÇØ„Éà">
                    </div>
                    <!-- „Çπ„ÉÜ„Éº„Ç∏„Çµ„Ç§„Ç∫Ôºà2Ë°åË°®Á§∫Ôºâ -->
                    <div class="setting-row setting-row-vertical">
                        <label>„Çπ„ÉÜ„Éº„Ç∏„Çµ„Ç§„Ç∫</label>
                        <div class="size-control-vertical">
                            <div class="size-row">
                                <span class="size-label">Á∏¶</span>
                                <button id="area-h-minus" class="size-btn">Ôºç</button>
                                <span id="area-h-value">1</span>
                                <button id="area-h-plus" class="size-btn">Ôºã</button>
                            </div>
                            <div class="size-row">
                                <span class="size-label">Ê®™</span>
                                <button id="area-w-minus" class="size-btn">Ôºç</button>
                                <span id="area-w-value">1</span>
                                <button id="area-w-plus" class="size-btn">Ôºã</button>
                            </div>
                        </div>
                    </div>
                    <!-- ËÉåÊôØËâ≤ -->
                    <div class="setting-row">
                        <label>ËÉåÊôØËâ≤</label>
                        <div id="stage-bg-color" class="color-swatch"></div>
                    </div>
                    <!-- BGMË®≠ÂÆö -->
                    <div class="setting-row setting-row-vertical">
                        <label>BGM</label>
                        <div class="bgm-selects bgm-indented">
                            <div class="bgm-select-row">
                                <span class="bgm-label">„Çπ„ÉÜ„Éº„Ç∏</span>
                                <select id="bgm-stage" class="bgm-select">
                                    <option value="">„Å™„Åó</option>
                                    <option value="bgm1">BGM 1</option>
                                </select>
                            </div>
                            <div class="bgm-select-row">
                                <span class="bgm-label">ÁÑ°Êïµ</span>
                                <select id="bgm-invincible" class="bgm-select">
                                    <option value="">„Å™„Åó</option>
                                    <option value="bgm1">BGM 1</option>
                                </select>
                            </div>
                            <div class="bgm-select-row">
                                <span class="bgm-label">„ÇØ„É™„Ç¢</span>
                                <select id="bgm-clear" class="bgm-select">
                                    <option value="">„Å™„Åó</option>
                                    <option value="bgm1">BGM 1</option>
                                </select>
                            </div>
                            <div class="bgm-select-row">
                                <span class="bgm-label">„Ç≤„Éº„É†„Ç™„Éº„Éê„Éº</span>
                                <select id="bgm-gameover" class="bgm-select">
                                    <option value="">„Å™„Åó</option>
                                    <option value="bgm1">BGM 1</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <!-- „ÇØ„É™„Ç¢Êù°‰ª∂ -->
                    <div class="setting-row">
                        <label>„ÇØ„É™„Ç¢Êù°‰ª∂</label>
                        <select id="stage-clear-condition" class="setting-select">
                            <option value="none">„Å™„Åó</option>
                            <option value="item">„Ç¢„Ç§„ÉÜ„É†ÂèñÂæó</option>
                            <option value="enemies">Êïµ„Åú„Çì„ÇÅ„Å§</option>
                            <option value="survival">„Çµ„Éê„Ç§„Éê„É´</option>
                        </select>
                    </div>
                    <!-- Âà∂ÈôêÊôÇÈñì -->
                    <div class="setting-row" id="time-limit-row">
                        <label id="time-limit-label">Âà∂ÈôêÊôÇÈñì</label>
                        <div class="time-control">
                            <input type="number" id="stage-time-min" min="0" max="99" value="0">
                            <span>ÂàÜ</span>
                            <input type="number" id="stage-time-sec" min="0" max="59" value="0">
                            <span>Áßí</span>
                        </div>
                    </div>
                    <!-- ‰øùÂ≠ò„Éú„Çø„É≥ -->
                    <div class="setting-row setting-row-center">
                        <button id="stage-settings-save" class="setting-save-btn">Ë®≠ÂÆö„Çí‰øùÂ≠ò</button>
                    </div>
                </div>
            </div>

            <div id="paint-content-wrapper">
                <!-- „É°„Ç§„É≥„Ç®„É™„Ç¢Ôºà„ÉÑ„Éº„É´Â∑¶ + „Ç≠„É£„É≥„Éê„Çπ‰∏≠Â§ÆÔºâ -->
                <div id="paint-main-area">
                    <!-- Á∑®ÈõÜ„ÉÑ„Éº„É´ÔºàÂ∑¶ÂÅ¥Á∏¶1ÂàóÔºâ -->
                    <div id="stage-tools" class="paint-tools-wrapper">
                        <button class="paint-tool-btn active" data-tool="pen" title="ÈÖçÁΩÆ">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path
                                    d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z" />
                            </svg>
                        </button>
                        <button class="paint-tool-btn" data-tool="eraser" title="Ê∂à„Åó„Ç¥„É†">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path
                                    d="M16.24 3.56l4.95 4.94c.78.79.78 2.05 0 2.84L12 20.53a4.008 4.008 0 01-5.66 0L2.81 17c-.78-.79-.78-2.05 0-2.84l10.6-10.6c.79-.78 2.05-.78 2.83 0zM4.22 15.58l3.54 3.53c.78.79 2.04.79 2.83 0l3.53-3.53-4.95-4.95-4.95 4.95z" />
                            </svg>
                        </button>
                        <button class="paint-tool-btn" data-tool="fill" title="Â°ó„Çä„Å§„Å∂„Åó">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path
                                    d="M16.56 8.94L7.62 0 6.21 1.41l2.38 2.38-5.15 5.15c-.59.59-.59 1.54 0 2.12l5.5 5.5c.29.29.68.44 1.06.44s.77-.15 1.06-.44l5.5-5.5c.59-.58.59-1.53 0-2.12zM5.21 10L10 5.21 14.79 10H5.21zM19 11.5s-2 2.17-2 3.5c0 1.1.9 2 2 2s2-.9 2-2c0-1.33-2-3.5-2-3.5z" />
                            </svg>
                        </button>
                        <button class="paint-tool-btn" data-tool="eyedropper" title="„Çπ„Éù„Ç§„Éà">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path
                                    d="M20.71 5.63l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-3.12 3.12-1.93-1.91-1.41 1.41 1.42 1.42L3 16.25V21h4.75l8.92-8.92 1.42 1.42 1.41-1.41-1.92-1.92 3.12-3.12c.4-.4.4-1.03.01-1.42zM6.92 19L5 17.08l8.06-8.06 1.92 1.92L6.92 19z" />
                            </svg>
                        </button>
                        <button class="paint-tool-btn" data-tool="undo" title="Âèñ„ÇäÊ∂à„Åó">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path
                                    d="M12.5 8c-2.65 0-5.05 1.04-6.82 2.75L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z" />
                            </svg>
                        </button>
                        <hr class="tool-divider">
                        <button class="paint-tool-btn" data-tool="copy" title="„Ç≥„Éî„Éº">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path
                                    d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z" />
                            </svg>
                        </button>
                        <button class="paint-tool-btn" data-tool="paste" title="„Éö„Éº„Çπ„Éà">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path
                                    d="M19 2h-4.18C14.4.84 13.3 0 12 0c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm7 18H5V4h2v3h10V4h2v16z" />
                            </svg>
                        </button>
                        <button class="paint-tool-btn flip-v-btn" data-tool="flip-v" title="‰∏ä‰∏ãÂèçËª¢">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path
                                    d="M15 21h2v-2h-2v2zm4-12h2V7h-2v2zM3 5v14c0 1.1.9 2 2 2h4v-2H5V5h4V3H5c-1.1 0-2 .9-2 2zm16-2v2h2c0-1.1-.9-2-2-2zm-8 20h2V1h-2v22zm8-6h2v-2h-2v2zM15 5h2V3h-2v2zm4 8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2z" />
                            </svg>
                        </button>
                        <button class="paint-tool-btn" data-tool="flip-h" title="Â∑¶Âè≥ÂèçËª¢">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path
                                    d="M15 21h2v-2h-2v2zm4-12h2V7h-2v2zM3 5v14c0 1.1.9 2 2 2h4v-2H5V5h4V3H5c-1.1 0-2 .9-2 2zm16-2v2h2c0-1.1-.9-2-2-2zm-8 20h2V1h-2v22zm8-6h2v-2h-2v2zM15 5h2V3h-2v2zm4 8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2z" />
                            </svg>
                        </button>
                    </div>

                    <!-- „Ç≠„É£„É≥„Éê„Çπ -->
                    <div id="stage-canvas-area">
                        <canvas id="stage-canvas"></canvas>
                    </div>
                </div>

                <!-- „Çø„Ç§„É´„Ç®„É™„Ç¢ÔºàËøΩÂä†„Éú„Çø„É≥Â∑¶Âõ∫ÂÆö + „Çπ„ÇØ„É≠„Éº„É´ÂèØËÉΩ„É™„Çπ„ÉàÔºâ -->
                <div id="tile-area" class="gallery-row">
                    <button id="add-tile-btn" class="gallery-add-btn">+</button>
                    <div class="gallery-scroll">
                        <div id="tile-list">
                            <!-- JS„ÅßÁîüÊàê -->
                        </div>
                    </div>
                </div>

                <!-- „Çø„Ç§„É´Ë®≠ÂÆö„Éë„Éç„É´Ôºà„Ç§„É≥„É©„Ç§„É≥Â±ïÈñãÔºâ -->
                <div id="tile-config-panel" class="hidden">
                    <!-- Èñâ„Åò„Çã„Éú„Çø„É≥ -->
                    <button id="config-close-btn" class="panel-close-btn">‚úï</button>

                    <!-- Â±ûÊÄßË°®Á§∫Ôºà„É©„Éô„É´„ÅÆ„Åø„ÄÅÂ§âÊõ¥‰∏çÂèØÔºâ -->
                    <div id="tile-type-label" class="config-type-label">Á¥†Êùê</div>

                    <!-- „Çπ„Éó„É©„Ç§„ÉàË®≠ÂÆöÔºàÂ±ûÊÄß„Å´„Çà„Å£„Å¶Ë°®Á§∫ÂÜÖÂÆπÂ§âÊõ¥Ôºâ -->
                    <div id="sprite-config-section">
                        <!-- JS„ÅßÂãïÁöÑÁîüÊàê -->
                    </div>

                    <!-- „Éë„É©„É°„Éº„ÇøË®≠ÂÆöÔºàÂ±ûÊÄß„Å´„Çà„Å£„Å¶Ë°®Á§∫ÂÜÖÂÆπÂ§âÊõ¥Ôºâ -->
                    <div id="param-config-section">
                        <!-- JS„ÅßÂãïÁöÑÁîüÊàê -->
                    </div>

                    <!-- „Ç¢„ÇØ„Ç∑„Éß„É≥„Éú„Çø„É≥ -->
                    <div class="config-row config-actions">
                        <button id="config-save-btn" class="config-btn primary">‰øùÂ≠ò</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- „Çπ„Éó„É©„Ç§„ÉàÈÅ∏Êäû„Éù„ÉÉ„Éó„Ç¢„ÉÉ„Éó -->
        <div id="sprite-select-popup" class="popup-overlay hidden">
            <div class="popup-content sprite-select-content">
                <div class="popup-header">
                    <span class="popup-title">„Çπ„Éó„É©„Ç§„Éà„ÇíÈÅ∏Êäû</span>
                    <button id="sprite-select-cancel" class="popup-close">√ó</button>
                </div>
                <div class="sprite-select-scroll">
                    <div id="sprite-select-list">
                        <!-- JS„ÅßÁîüÊàê -->
                    </div>
                </div>
                <div class="popup-actions">
                    <button id="sprite-select-done" class="popup-btn primary">ÂÆå‰∫Ü</button>
                </div>
            </div>
        </div>

        <!-- Â±ûÊÄßÈÅ∏Êäû„Éù„ÉÉ„Éó„Ç¢„ÉÉ„ÉóÔºà+„Éú„Çø„É≥Êäº‰∏ãÊôÇÔºâ -->
        <div id="type-select-popup" class="popup-overlay hidden">
            <div class="popup-content type-select-content">
                <div class="popup-header">
                    <span class="popup-title">Â±ûÊÄß„ÇíÈÅ∏Êäû</span>
                    <button id="type-select-cancel" class="popup-close">‚úï</button>
                </div>
                <div class="type-list">
                    <button class="type-select-item" data-type="player">„Éó„É¨„Ç§„É§„Éº</button>
                    <button class="type-select-item" data-type="enemy">Êïµ</button>
                    <button class="type-select-item" data-type="material">Á¥†Êùê</button>
                    <button class="type-select-item" data-type="item">„Ç¢„Ç§„ÉÜ„É†</button>
                </div>
            </div>
        </div>

        <!-- ========== „Çµ„Ç¶„É≥„ÉâÁîªÈù¢ ========== -->
        <div id="sound-screen" class="screen">
            <div class="screen-title">SOUND</div>

            <!-- „Éà„É©„ÉÉ„ÇØ„Éë„Éç„É´Ôºà„Éà„É©„ÉÉ„ÇØ‰∏≠Â§ÆÈÖçÁΩÆÔºâ -->
            <div id="track-panel">
                <div id="track-tabs">
                    <button class="track-tab active" data-track="0">Tr1</button>
                    <button class="track-tab" data-track="1">Tr2</button>
                    <button class="track-tab" data-track="2">Tr3</button>
                    <button class="track-tab" data-track="3">Tr4</button>
                </div>
            </div>

            <!-- „É°„Ç§„É≥„Ç®„É™„Ç¢Ôºà„Ç≥„É≥„Éà„É≠„Éº„É´ + „Éî„Ç¢„Éé„É≠„Éº„É´Ôºâ -->
            <div id="sound-main-area">
                <!-- „Éó„É¨„Ç§„É§„Éº„Ç≥„É≥„Éà„É≠„Éº„É´ÔºàÂ∑¶Á∏¶ÈÖçÁΩÆÔºâ -->
                <div id="sound-controls">
                    <button id="sound-play-btn" class="sound-ctrl-btn play-stop" title="PLAY/STOP">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M8 5v14l11-7z" />
                        </svg>
                    </button>
                    <button id="sound-step-rec-btn" class="sound-ctrl-btn step-rec" title="STEP REC">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <circle cx="12" cy="12" r="8" />
                        </svg>
                    </button>
                    <hr class="ctrl-divider">
                    <button id="sound-del-btn" class="sound-ctrl-btn" title="DEL">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path
                                d="M12.5 8c-2.65 0-5.05 1.04-6.82 2.75L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z" />
                        </svg>
                    </button>
                    <button id="sound-rest-btn" class="sound-ctrl-btn" title="REST">
                        <svg viewBox="0 0 24 24" fill="currentColor" style="transform: scaleX(-1);">
                            <path
                                d="M12.5 8c-2.65 0-5.05 1.04-6.82 2.75L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z" />
                        </svg>
                    </button>
                    <button id="sound-tie-btn" class="sound-ctrl-btn" title="TIE">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M4 16 C4 8, 20 8, 20 16" stroke-linecap="round" />
                        </svg>
                    </button>
                    <hr class="ctrl-divider">
                    <button id="sound-copy-btn" class="sound-ctrl-btn" title="„Ç≥„Éî„Éº">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path
                                d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z" />
                        </svg>
                    </button>
                    <button id="sound-paste-btn" class="sound-ctrl-btn" title="„Éö„Éº„Çπ„Éà">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path
                                d="M19 2h-4.18C14.4.84 13.3 0 12 0c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm7 18H5V4h2v3h10V4h2v16z" />
                        </svg>
                    </button>
                </div>

                <!-- „Éî„Ç¢„Éé„É≠„Éº„É´ -->
                <div id="piano-roll-area">
                    <canvas id="piano-roll-canvas"></canvas>
                </div>
            </div>

            <!-- ÈçµÁõ§„Çπ„ÇØ„É≠„Éº„É´„Éê„ÉºÔºàiOSÂØæÂøúÔºâ -->
            <div id="keyboard-scroll-container">
                <input type="range" id="keyboard-scrollbar" min="0" max="100" value="0">
            </div>

            <!-- ÈçµÁõ§Ôºà5„Ç™„ÇØ„Çø„Éº„Éñ„ÄÅÊ®™„Çπ„ÇØ„É≠„Éº„É´Ôºâ -->
            <div id="keyboard-area">
                <div id="piano-keyboard">
                    <!-- JS„ÅßÁîüÊàê -->
                </div>
            </div>

            <!-- „ÇΩ„É≥„Ç∞„Éë„É¨„ÉÉ„ÉàÔºà„Çø„Ç§„É´„Éë„É¨„ÉÉ„Éà„Å®Âêå„ÅòÊßãÈÄ†Ôºâ -->
            <div id="song-palette-area" class="gallery-row">
                <button id="add-song-btn" class="gallery-add-btn">+</button>
                <div class="gallery-scroll">
                    <div id="song-gallery">
                        <!-- „ÇΩ„É≥„Ç∞„Éú„Çø„É≥„ÅØJS„ÅßÁîüÊàê -->
                    </div>
                </div>
            </div>

            <!-- „ÇΩ„É≥„Ç∞Ë®≠ÂÆö„Éë„Éç„É´Ôºà‰∏ã„Åã„ÇâÊäº„Åó‰∏ä„ÅíÔºâ -->
            <div id="song-config-panel" class="hidden">
                <div class="config-header">
                    <span class="config-title">„ÇΩ„É≥„Ç∞Ë®≠ÂÆö</span>
                    <div class="config-header-btns">
                        <button id="song-config-save" class="header-btn">‰øùÂ≠ò</button>
                        <button id="song-config-close" class="header-btn">Èñâ„Åò„Çã</button>
                    </div>
                </div>
                <div class="config-body">
                    <div class="config-row">
                        <label>„ÇΩ„É≥„Ç∞Âêç</label>
                        <input type="text" id="song-name-input" maxlength="16" placeholder="Song1">
                    </div>
                    <div class="config-row">
                        <label>BPM</label>
                        <div class="config-stepper">
                            <button id="song-bpm-dec" class="stepper-btn">‚àí</button>
                            <span id="song-bpm-value">120</span>
                            <button id="song-bpm-inc" class="stepper-btn">+</button>
                        </div>
                    </div>
                    <div class="config-row">
                        <label>Â∞èÁØÄÊï∞</label>
                        <div class="config-stepper">
                            <button id="song-bars-dec" class="stepper-btn">‚àí</button>
                            <span id="song-bars-value">1</span>
                            <button id="song-bars-inc" class="stepper-btn">+</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ========== „É¢„Éº„ÉÄ„É´ ========== -->

    <!-- Á®ÆÂà•ÈÅ∏Êäû„É¢„Éº„ÉÄ„É´ -->
    <div id="type-select-modal" class="modal-overlay hidden">
        <div class="modal-content modal-small">
            <div class="modal-header">„Çø„Ç§„É´Á®ÆÂà•„ÇíÈÅ∏Êäû</div>
            <div class="modal-body">
                <div class="type-grid">
                    <button class="type-btn" data-type="player">
                        <span class="type-icon">üéÆ</span>
                        <span class="type-label">„Éó„É¨„Ç§„É§„Éº</span>
                    </button>
                    <button class="type-btn" data-type="enemy">
                        <span class="type-icon">üëæ</span>
                        <span class="type-label">Êïµ</span>
                    </button>
                    <button class="type-btn" data-type="material">
                        <span class="type-icon">üß±</span>
                        <span class="type-label">Á¥†Êùê</span>
                    </button>
                    <button class="type-btn" data-type="item">
                        <span class="type-icon">‚≠ê</span>
                        <span class="type-label">„Ç¢„Ç§„ÉÜ„É†</span>
                    </button>
                    <button class="type-btn" data-type="goal">
                        <span class="type-icon">üö©</span>
                        <span class="type-label">„Ç¥„Éº„É´</span>
                    </button>
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-btn cancel-btn" data-action="close">„Ç≠„É£„É≥„Çª„É´</button>
            </div>
        </div>
    </div>

    <!-- „Éó„É¨„Ç§„É§„ÉºË®≠ÂÆö„É¢„Éº„ÉÄ„É´ -->
    <div id="player-config-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header">üéÆ „Éó„É¨„Ç§„É§„ÉºË®≠ÂÆö</div>
            <div class="modal-body">
                <div class="config-section">
                    <label class="config-label">„É°„Ç§„É≥ (ÂøÖÈ†à)</label>
                    <button class="sprite-select-btn" data-slot="main">ÈÅ∏Êäû</button>
                </div>
                <div class="config-section">
                    <label class="config-label">„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥ (‰ªªÊÑè)</label>
                    <div class="anim-grid">
                        <div class="anim-item"><span>WALK</span><button class="sprite-select-btn small"
                                data-slot="walk">+</button></div>
                        <div class="anim-item"><span>JUMP</span><button class="sprite-select-btn small"
                                data-slot="jump">+</button></div>
                        <div class="anim-item"><span>ATTACK</span><button class="sprite-select-btn small"
                                data-slot="attack">+</button></div>
                        <div class="anim-item"><span>SHOT</span><button class="sprite-select-btn small"
                                data-slot="shot">+</button></div>
                    </div>
                </div>
                <div class="config-section">
                    <label class="config-label">LIFEË°®Á§∫</label>
                    <button class="sprite-select-btn small" data-slot="life">+</button>
                    <label class="config-label inline">LIFEÊï∞</label>
                    <select class="config-select" id="player-life-count">
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3" selected>3</option>
                        <option value="5">5</option>
                        <option value="10">10</option>
                        <option value="-1">‚àû</option>
                    </select>
                </div>
                <div class="config-section">
                    <label class="config-label">ÊîªÊíÉÊñπÊ≥ï</label>
                    <div class="radio-group">
                        <label><input type="radio" name="attack-type" value="none" checked> „Å™„Åó</label>
                        <label><input type="radio" name="attack-type" value="stomp"> Ë∏è„ÇÄ</label>
                        <label><input type="radio" name="attack-type" value="weapon"> Ê≠¶Âô®</label>
                        <select class="config-select small" id="weapon-range">
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3" selected>3</option>
                            <option value="5">5</option>
                        </select>
                    </div>
                </div>
                <div class="config-section">
                    <label class="config-label">ÂäπÊûúÈü≥</label>
                    <div class="sound-grid">
                        <button class="sound-btn" data-sound="jump">Jump ‚ô™</button>
                        <button class="sound-btn" data-sound="attack">Attack ‚ô™</button>
                        <button class="sound-btn" data-sound="damage">Damage ‚ô™</button>
                        <button class="sound-btn" data-sound="ko">KO ‚ô™</button>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-btn cancel-btn" data-action="close">„Ç≠„É£„É≥„Çª„É´</button>
                <button class="modal-btn ok-btn" data-action="save">Ê±∫ÂÆö</button>
            </div>
        </div>
    </div>

    <!-- ÊïµË®≠ÂÆö„É¢„Éº„ÉÄ„É´ -->
    <div id="enemy-config-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header">üëæ ÊïµË®≠ÂÆö</div>
            <div class="modal-body">
                <div class="config-section">
                    <label class="config-label">„É°„Ç§„É≥ (ÂøÖÈ†à)</label>
                    <button class="sprite-select-btn" data-slot="main">ÈÅ∏Êäû</button>
                </div>
                <div class="config-section">
                    <label class="config-label">„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥ (‰ªªÊÑè)</label>
                    <div class="anim-grid">
                        <div class="anim-item"><span>WALK</span><button class="sprite-select-btn small"
                                data-slot="walk">+</button></div>
                        <div class="anim-item"><span>JUMP</span><button class="sprite-select-btn small"
                                data-slot="jump">+</button></div>
                        <div class="anim-item"><span>ATTACK</span><button class="sprite-select-btn small"
                                data-slot="attack">+</button></div>
                    </div>
                </div>
                <div class="config-section">
                    <label class="config-label">LIFEÊï∞</label>
                    <select class="config-select" id="enemy-life-count">
                        <option value="1" selected>1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="5">5</option>
                        <option value="10">10</option>
                        <option value="-1">‚àû</option>
                    </select>
                </div>
                <div class="config-section">
                    <label class="config-label">ÁßªÂãï„Éë„Çø„Éº„É≥</label>
                    <div class="radio-group">
                        <label><input type="radio" name="enemy-move" value="none" checked> „Å™„Åó</label>
                        <label><input type="radio" name="enemy-move" value="patrol"> ÂæÄÂæ©</label>
                        <label><input type="radio" name="enemy-move" value="jump"> „Ç∏„É£„É≥„Éó</label>
                        <label><input type="radio" name="enemy-move" value="chase"> ËøΩË∑°</label>
                    </div>
                </div>
                <div class="config-section">
                    <label class="config-label">ÂäπÊûúÈü≥</label>
                    <div class="sound-grid">
                        <button class="sound-btn" data-sound="jump">Jump ‚ô™</button>
                        <button class="sound-btn" data-sound="attack">Attack ‚ô™</button>
                        <button class="sound-btn" data-sound="damage">Damage ‚ô™</button>
                        <button class="sound-btn" data-sound="ko">KO ‚ô™</button>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-btn cancel-btn" data-action="close">„Ç≠„É£„É≥„Çª„É´</button>
                <button class="modal-btn ok-btn" data-action="save">Ê±∫ÂÆö</button>
            </div>
        </div>
    </div>

    <!-- Á¥†ÊùêË®≠ÂÆö„É¢„Éº„ÉÄ„É´ -->
    <div id="material-config-modal" class="modal-overlay hidden">
        <div class="modal-content modal-small">
            <div class="modal-header">üß± Á¥†ÊùêË®≠ÂÆö</div>
            <div class="modal-body">
                <div class="config-section">
                    <label class="config-label">„É°„Ç§„É≥ (ÂøÖÈ†à)</label>
                    <button class="sprite-select-btn" data-slot="main">ÈÅ∏Êäû</button>
                    <label class="config-label inline">„Ç¢„Éã„É°</label>
                    <button class="sprite-select-btn small" data-slot="anim">+</button>
                </div>
                <div class="config-section">
                    <label class="config-label">ÂΩì„Åü„ÇäÂà§ÂÆö</label>
                    <label class="checkbox-label"><input type="checkbox" id="material-collision" checked> ON</label>
                </div>
                <div class="config-section">
                    <label class="config-label">LIFEÊï∞</label>
                    <select class="config-select" id="material-life-count">
                        <option value="-1" selected>‚àû</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="5">5</option>
                        <option value="10">10</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-btn cancel-btn" data-action="close">„Ç≠„É£„É≥„Çª„É´</button>
                <button class="modal-btn ok-btn" data-action="save">Ê±∫ÂÆö</button>
            </div>
        </div>
    </div>

    <!-- „Ç¢„Ç§„ÉÜ„É†Ë®≠ÂÆö„É¢„Éº„ÉÄ„É´ -->
    <div id="item-config-modal" class="modal-overlay hidden">
        <div class="modal-content modal-small">
            <div class="modal-header">‚≠ê „Ç¢„Ç§„ÉÜ„É†Ë®≠ÂÆö</div>
            <div class="modal-body">
                <div class="config-section">
                    <label class="config-label">„É°„Ç§„É≥ (ÂøÖÈ†à)</label>
                    <button class="sprite-select-btn" data-slot="main">ÈÅ∏Êäû</button>
                    <label class="config-label inline">„Ç¢„Éã„É°</label>
                    <button class="sprite-select-btn small" data-slot="anim">+</button>
                </div>
                <div class="config-section">
                    <label class="config-label">ÂäπÊûú</label>
                    <div class="radio-group">
                        <label><input type="radio" name="item-effect" value="invincible"> ÁÑ°Êïµ</label>
                        <label><input type="radio" name="item-effect" value="lifeup" checked> „É©„Ç§„Éï„Ç¢„ÉÉ„Éó</label>
                        <label><input type="radio" name="item-effect" value="weapon"> Ê≠¶Âô®ÂèñÂæó</label>
                    </div>
                </div>
                <div class="config-section">
                    <label class="config-label">ÂäπÊûúÈü≥</label>
                    <button class="sound-btn" data-sound="get">Get ‚ô™</button>
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-btn cancel-btn" data-action="close">„Ç≠„É£„É≥„Çª„É´</button>
                <button class="modal-btn ok-btn" data-action="save">Ê±∫ÂÆö</button>
            </div>
        </div>
    </div>

    <!-- „Ç¥„Éº„É´Ë®≠ÂÆö„É¢„Éº„ÉÄ„É´ -->
    <div id="goal-config-modal" class="modal-overlay hidden">
        <div class="modal-content modal-small">
            <div class="modal-header">üö© „Ç¥„Éº„É´Ë®≠ÂÆö</div>
            <div class="modal-body">
                <div class="config-section">
                    <label class="config-label">„É°„Ç§„É≥ (ÂøÖÈ†à)</label>
                    <button class="sprite-select-btn" data-slot="main">ÈÅ∏Êäû</button>
                    <label class="config-label inline">„Ç¢„Éã„É°</label>
                    <button class="sprite-select-btn small" data-slot="anim">+</button>
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-btn cancel-btn" data-action="close">„Ç≠„É£„É≥„Çª„É´</button>
                <button class="modal-btn ok-btn" data-action="save">Ê±∫ÂÆö</button>
            </div>
        </div>
    </div>

    <!-- „Çπ„ÉÜ„Éº„Ç∏Ë®≠ÂÆö„É¢„Éº„ÉÄ„É´ -->
    <div id="stage-settings-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header">„Çπ„ÉÜ„Éº„Ç∏Ë®≠ÂÆö</div>
            <div class="modal-body">
                <div class="config-section">
                    <label class="config-label">„ÇØ„É™„Ç¢Êù°‰ª∂</label>
                    <div class="radio-group vertical">
                        <label><input type="radio" name="clear-condition" value="goal" checked> „Ç¥„Éº„É´„Å´„Åü„Å©„ÇäÁùÄ„Åè</label>
                        <label><input type="radio" name="clear-condition" value="items"> ÂÖ®„Ç¢„Ç§„ÉÜ„É†ÂèñÂæó</label>
                        <label><input type="radio" name="clear-condition" value="enemies"> ÊïµÂÖ®ÊªÖ</label>
                    </div>
                </div>
                <div class="config-section">
                    <label class="config-label">„Çµ„Ç¶„É≥„Éâ</label>
                    <div class="sound-config-grid">
                        <div class="sound-config-item">
                            <span>BGM</span>
                            <select class="config-select" id="stage-bgm">
                                <option value="">„Å™„Åó</option>
                                <option value="default">„Éá„Éï„Ç©„É´„Éà</option>
                            </select>
                        </div>
                        <div class="sound-config-item">
                            <span>CLEAR</span>
                            <select class="config-select" id="stage-clear">
                                <option value="default" selected>„Éá„Éï„Ç©„É´„Éà</option>
                            </select>
                        </div>
                        <div class="sound-config-item">
                            <span>GAMEOVER</span>
                            <select class="config-select" id="stage-gameover">
                                <option value="default" selected>„Éá„Éï„Ç©„É´„Éà</option>
                            </select>
                        </div>
                        <div class="sound-config-item">
                            <span>STAR</span>
                            <select class="config-select" id="stage-star">
                                <option value="default" selected>„Éá„Éï„Ç©„É´„Éà</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-btn cancel-btn" data-action="close">„Ç≠„É£„É≥„Çª„É´</button>
                <button class="modal-btn ok-btn" data-action="save">Ê±∫ÂÆö</button>
            </div>
        </div>
    </div>

    <!-- „Çπ„Éó„É©„Ç§„ÉàÈÅ∏Êäû„É¢„Éº„ÉÄ„É´ -->
    <div id="sprite-select-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header">„Çπ„Éó„É©„Ç§„Éà„ÇíÈÅ∏Êäû</div>
            <div class="modal-body">
                <div id="sprite-select-list">
                    <!-- JS„ÅßÁîüÊàê -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-btn cancel-btn" data-action="close">„Ç≠„É£„É≥„Çª„É´</button>
            </div>
        </div>
    </div>

    <!-- ÂÖ±Êúâ„ÉÄ„Ç§„Ç¢„É≠„Ç∞ -->
    <div id="share-dialog" class="modal-overlay hidden">
        <div class="modal-content share-modal-content">
            <h3>„Ç≤„Éº„É†„ÇíÂÖ±Êúâ</h3>
            <p class="share-description">URL„Çí„Ç≥„Éî„Éº„Åó„Å¶ÂÖ±Êúâ„Åß„Åç„Åæ„Åô</p>

            <div class="share-url-container">
                <input type="text" id="share-url-input" readonly>
                <button id="copy-url-btn" class="share-btn">
                    <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
                        <path
                            d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z" />
                    </svg>
                    „Ç≥„Éî„Éº
                </button>
            </div>

            <div id="copy-success" class="copy-success hidden">‚úì „Ç≥„Éî„Éº„Åó„Åæ„Åó„Åü</div>

            <div class="share-sns-container">
                <button id="share-x-btn" class="share-sns-btn">
                    <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
                        <path
                            d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z" />
                    </svg>
                    X „ÅßÂÖ±Êúâ
                </button>
            </div>

            <button id="share-close-btn" class="modal-btn cancel-btn">Èñâ„Åò„Çã</button>
        </div>
    </div>

    <!-- „Éë„É¨„ÉÉ„Éà„Éó„É™„Çª„ÉÉ„ÉàÈÅ∏Êäû„ÉÄ„Ç§„Ç¢„É≠„Ç∞ -->
    <div id="palette-preset-dialog" class="modal-overlay hidden">
        <div class="modal-content palette-preset-modal">
            <h3>„Éë„É¨„ÉÉ„Éà„Éó„É™„Çª„ÉÉ„Éà</h3>

            <div id="palette-preset-list" class="preset-list">
                <label class="preset-item">
                    <input type="radio" name="palette-preset" value="pastel">
                    <span class="preset-name">„Éë„Çπ„ÉÜ„É´</span>
                    <span class="preset-count">(16Ëâ≤)</span>
                </label>
                <label class="preset-item">
                    <input type="radio" name="palette-preset" value="famicom">
                    <span class="preset-name">„Éï„Ç°„Éü„Ç≥„É≥</span>
                    <span class="preset-count">(54Ëâ≤)</span>
                </label>
                <label class="preset-item">
                    <input type="radio" name="palette-preset" value="gameboy">
                    <span class="preset-name">„Ç≤„Éº„É†„Éú„Éº„Ç§</span>
                    <span class="preset-count">(4Ëâ≤)</span>
                </label>
                <label class="preset-item">
                    <input type="radio" name="palette-preset" value="mono">
                    <span class="preset-name">„É¢„Éé„ÇØ„É≠</span>
                    <span class="preset-count">(8Ëâ≤)</span>
                </label>
            </div>

            <div class="preset-buttons">
                <button id="preset-add-btn" class="modal-btn ok-btn">ËøΩÂä†</button>
                <button id="preset-replace-btn" class="modal-btn" style="background: #e67e22;">ÁΩÆÊèõ</button>
                <button id="preset-close-btn" class="modal-btn cancel-btn">Èñâ„Åò„Çã</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pako/2.1.0/pako.min.js"></script>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-database-compat.js"></script>
    <script>
        // FirebaseË®≠ÂÆö
        const firebaseConfig = {
            apiKey: "AIzaSyBsFgWrSzxROQFUNHkNNGge7L4Zu3HJX6E",
            authDomain: "pixelgamekit.firebaseapp.com",
            databaseURL: "https://pixelgamekit-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "pixelgamekit",
            storageBucket: "pixelgamekit.firebasestorage.app",
            messagingSenderId: "1086024698812",
            appId: "1:1086024698812:web:ead683283290403f3f79b9"
        };
        firebase.initializeApp(firebaseConfig);
        window.firebaseDB = firebase.database();
    </script>

    <script src="js/utils/storage.js"></script>
    <script src="js/utils/share.js"></script>
    <script src="js/editor/sprite-editor.js"></script>
    <script src="js/editor/stage-editor.js"></script>
    <script src="js/editor/bgm-editor.js"></script>
    <script src="js/engine/audio.js"></script>
    <script src="js/engine/game-engine.js"></script>
    <script src="js/engine/player.js"></script>
    <script src="js/engine/enemy.js"></script>
    <script src="js/ui/controller.js"></script>
    <script src="js/app.js"></script>
</body>

</html>